#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks (same as CI)..."

# 1. TypeScript type check
echo "ğŸ“ Type checking..."
npm run type-check || {
  echo "âŒ TypeScript type check failed"
  exit 1
}

# 2. ESLint check (strict mode - no auto-fix, same as CI)
echo "ğŸ”§ Linting..."
npm run lint || {
  echo "âŒ ESLint check failed"
  echo "ğŸ’¡ Run 'npm run lint:fix' to auto-fix errors, or fix manually"
  exit 1
}

# 3. Prettier format check (strict mode - no auto-fix, same as CI)
echo "ğŸ’… Formatting check..."
npm run format:check || {
  echo "âŒ Prettier format check failed"
  echo "ğŸ’¡ Run 'npm run format' to auto-fix formatting"
  exit 1
}

echo "âœ… All checks passed! Ready for commit."